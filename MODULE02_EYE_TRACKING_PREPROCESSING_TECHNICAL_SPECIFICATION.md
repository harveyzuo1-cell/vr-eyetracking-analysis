# VRçœ¼åŠ¨æ•°æ®é¢„å¤„ç†æŠ€æœ¯è§„èŒƒ

## æ–‡æ¡£ä¿¡æ¯
- **ç‰ˆæœ¬**: 2.0
- **æ—¥æœŸ**: 2025-10-06
- **çŠ¶æ€**: åŸºäºæœ€æ–°å­¦æœ¯æ–‡çŒ®ä¿®è®¢

---

## ç›®å½•
1. [çœ¼åŠ¨æ•°æ®ç‰¹æ€§åˆ†æ](#1-çœ¼åŠ¨æ•°æ®ç‰¹æ€§åˆ†æ)
2. [IVTç®—æ³•è¯¦è§£](#2-ivtç®—æ³•è¯¦è§£)
3. [å½“å‰é¢„å¤„ç†æ–¹æ¡ˆé—®é¢˜åˆ†æ](#3-å½“å‰é¢„å¤„ç†æ–¹æ¡ˆé—®é¢˜åˆ†æ)
4. [æ–°é¢„å¤„ç†æ–¹æ¡ˆè®¾è®¡](#4-æ–°é¢„å¤„ç†æ–¹æ¡ˆè®¾è®¡)
5. [é£é™©è¯„ä¼°ä¸ç¼“è§£ç­–ç•¥](#5-é£é™©è¯„ä¼°ä¸ç¼“è§£ç­–ç•¥)
6. [å®æ–½å»ºè®®](#6-å®æ–½å»ºè®®)

---

## 1. çœ¼åŠ¨æ•°æ®ç‰¹æ€§åˆ†æ

### 1.1 VRçœ¼åŠ¨æ•°æ®çš„ç‹¬ç‰¹æ€§

VRçœ¼åŠ¨è¿½è¸ªä¸ä¼ ç»Ÿå±å¹•çœ¼åŠ¨è¿½è¸ªå­˜åœ¨æœ¬è´¨å·®å¼‚:

| ç‰¹å¾ | ä¼ ç»Ÿ2Då±å¹• | VRç¯å¢ƒ |
|------|-----------|--------|
| **åæ ‡ç³»ç»Ÿ** | 2Då±å¹•åæ ‡(x, y) | 3Dä¸–ç•Œåæ ‡ + æ³¨è§†æ–¹å‘å‘é‡ |
| **å¤´éƒ¨è¿åŠ¨** | å›ºå®š/æœ‰é™ | å®Œå…¨è‡ªç”±(6-DOF) |
| **é‡‡æ ·ç‡** | 60-1000Hz | é€šå¸¸60-120Hz |
| **æ•°æ®è´¨é‡** | ç›¸å¯¹ç¨³å®š | å—å¤´æ˜¾ç§»åŠ¨å½±å“ |
| **çœ¨çœ¼æ¨¡å¼** | æ¸…æ™°å¯è¾¨ | å¯èƒ½è¢«å¤´éƒ¨è¿åŠ¨æ··æ·† |

### 1.2 æ•°æ®ç¼ºå¤±çš„ä¸»è¦æ¥æº

**æ–‡çŒ®ä¾æ®**: Uncovering and Addressing Blink-Related Challenges in Using Eye Tracking for Interactive Systems (CHI 2024)

1. **ç”Ÿç†æ€§çœ¨çœ¼**
   - é¢‘ç‡: çº¦15-20æ¬¡/åˆ†é’Ÿ
   - æŒç»­æ—¶é—´: 100-400ms
   - ç‰¹å¾: æ•°æ®ä¸¢å¤±å‰åæœ‰ç³å­”é¢ç§¯æ€¥å‰§å˜åŒ–

2. **è¿½è¸ªä¸¢å¤±**
   - åŸå› : å¤´æ˜¾ç§»ä½ã€å¼ºå…‰åå°„ã€æç«¯æ³¨è§†è§’åº¦
   - ç‰¹å¾: æŒç»­æ—¶é—´ä¸å®š,æ— è§„å¾‹æ¨¡å¼

3. **ç³»ç»Ÿå™ªå£°**
   - æ¥æº: ä¼ æ„Ÿå™¨å™ªå£°ã€æ ¡å‡†è¯¯å·®
   - ç‰¹å¾: é«˜é¢‘éšæœºæ³¢åŠ¨(>75Hz)

### 1.3 å…³é”®è§‚å¯Ÿ

**âš ï¸ é‡è¦å‘ç°**:
- **VRæ•°æ®é›†é€šå¸¸ä¼šä¸»åŠ¨é¿å…çœ¨çœ¼å’Œé”™è¯¯æ£€æµ‹** (VR Eye Tracking Survey 2024)
- **çœ¨çœ¼æœŸé—´çœ¼çƒä½ç½®å˜åŒ–ä¸å¯é¢„æµ‹,ä¸åº”æ’å€¼æ³¨è§†ä½ç½®** (MNE Preprocessing Documentation)
- **åªæœ‰ç³å­”ç›´å¾„å¯ä»¥å®‰å…¨æ’å€¼,æ³¨è§†åæ ‡ä¸åº”æ’å€¼** (Best Practices 2024)

---

## 2. IVTç®—æ³•è¯¦è§£

### 2.1 ç®—æ³•åŸç†

**IVT (Identification by Velocity Threshold)** æ˜¯åŸºäºé€Ÿåº¦é˜ˆå€¼çš„æ³¨è§†ç‚¹æ£€æµ‹ç®—æ³•ã€‚

#### æ ¸å¿ƒæ€æƒ³
æ ¹æ®çœ¼åŠ¨é€Ÿåº¦å°†æ•°æ®åˆ†ç±»ä¸º:
- **æ³¨è§†(Fixation)**: é€Ÿåº¦ < é˜ˆå€¼ â†’ ä¿¡æ¯æå–é˜¶æ®µ
- **æ‰«è§†(Saccade)**: é€Ÿåº¦ â‰¥ é˜ˆå€¼ â†’ å¿«é€Ÿçœ¼åŠ¨

### 2.2 æ•°å­¦å…¬å¼

#### 2.2.1 ç‚¹å¯¹ç‚¹é€Ÿåº¦è®¡ç®—

å¯¹äºè¿ç»­ä¸¤ä¸ªé‡‡æ ·ç‚¹ $P_i(x_i, y_i, t_i)$ å’Œ $P_{i+1}(x_{i+1}, y_{i+1}, t_{i+1})$:

**æ¬§æ°è·ç¦»(åƒç´ )**:
```
d_pixel = âˆš[(x_{i+1} - x_i)Â² + (y_{i+1} - y_i)Â²]
```

**è½¬æ¢ä¸ºè§†è§’(åº¦)**:
```
d_degree = 2 Ã— arctan(d_pixel / (2 Ã— viewing_distance))
```

å¯¹äºVR,ä½¿ç”¨è§’åº¦ç›´æ¥è®¡ç®—:
```
angular_distance = arccos(cos(Î¸â‚)cos(Î¸â‚‚)cos(Ï†â‚-Ï†â‚‚) + sin(Î¸â‚)sin(Î¸â‚‚))
```
å…¶ä¸­ $(Î¸, Ï†)$ æ˜¯çƒé¢åæ ‡

**é€Ÿåº¦(åº¦/ç§’)**:
```
velocity = angular_distance / (t_{i+1} - t_i)
```

#### 2.2.2 æ³¨è§†/æ‰«è§†åˆ†ç±»

```python
if velocity < threshold:
    event_type = "fixation"
else:
    event_type = "saccade"
```

### 2.3 æ ‡å‡†å‚æ•°(åŸºäºTobii I-VT Filter)

| å‚æ•° | æ¨èå€¼ | èŒƒå›´ | è¯´æ˜ |
|------|--------|------|------|
| **é€Ÿåº¦é˜ˆå€¼** | 30-35 Â°/s | 20-100 Â°/s | æ ¸å¿ƒå‚æ•°,åŒºåˆ†æ³¨è§†/æ‰«è§† |
| **æœ€å°æ³¨è§†æ—¶é•¿** | 60-100 ms | 40-200 ms | è¿‡æ»¤å¾®æ‰«è§† |
| **åˆå¹¶è·ç¦»é˜ˆå€¼** | 0.5-1.0Â° | 0.3-2.0Â° | åˆå¹¶ç›¸é‚»æ³¨è§†ç‚¹ |
| **åˆå¹¶æ—¶é—´çª—å£** | 75 ms | 50-100 ms | æ—¶é—´ä¸Šçš„æ³¨è§†åˆå¹¶ |
| **æœ€å°æ‰«è§†æ—¶é•¿** | 10-20 ms | 5-50 ms | è¿‡æ»¤å™ªå£° |

### 2.4 é¢„å¤„ç†ä¸­çš„å™ªå£°é™ä½(å¯é€‰)

**æ–‡çŒ®ä¾æ®**: The Tobii I-VT Fixation Filter

IVTå¯é€‰å™ªå£°é™ä½æ–¹æ³•:

#### æ–¹æ³•1: ç§»åŠ¨å¹³å‡(Moving Average)
```
x_smooth[i] = (1/w) Ã— Î£(x[i-k] to x[i+k])
```
- çª—å£å¤§å° `w = 3-5` ä¸ªæ ·æœ¬
- ä¼˜ç‚¹: ç®€å•å¿«é€Ÿ
- ç¼ºç‚¹: å»¶è¿Ÿ,è¾¹ç¼˜æ•ˆåº”

#### æ–¹æ³•2: ä¸­å€¼æ»¤æ³¢(Median Filter)
```
x_smooth[i] = median(x[i-k], ..., x[i], ..., x[i+k])
```
- çª—å£å¤§å° `w = 3-5` ä¸ªæ ·æœ¬
- ä¼˜ç‚¹: ä¿ç•™è¾¹ç¼˜,æŠ—ç¦»ç¾¤å€¼
- ç¼ºç‚¹: è®¡ç®—ç¨æ…¢

**âš ï¸ é‡è¦**: IVTæœ¬èº«å…·æœ‰æŠ—å™ªèƒ½åŠ›,**ä¸å¼ºåˆ¶è¦æ±‚é¢„æ»¤æ³¢**

---

## 3. å½“å‰é¢„å¤„ç†æ–¹æ¡ˆé—®é¢˜åˆ†æ

### 3.1 å½“å‰é…ç½®å®¡æŸ¥

```python
# ç°æœ‰é»˜è®¤é…ç½®
config = {
    'cleaning_config': {
        'missing_method': 'interpolate',      # âŒ é—®é¢˜!
        'outlier_method': '3sigma',
        'outlier_threshold': 3.0,
        'outlier_action': 'interpolate',      # âŒ é—®é¢˜!
        'clip_range': True,
        'x_range': [0, 1],
        'y_range': [0, 1],
        'resample': False,
        'target_rate': 60
    },
    'smoothing_config': {
        'method': 'gaussian',                 # âš ï¸ å­˜ç–‘!
        'window_size': 5,
        'sigma': 1.5,
        'smooth_x': True,                     # âš ï¸ å­˜ç–‘!
        'smooth_y': True                      # âš ï¸ å­˜ç–‘!
    }
}
```

### 3.2 é—®é¢˜è¯¦è§£

#### é—®é¢˜1: æ³¨è§†ä½ç½®æ’å€¼ âŒ

**ç°çŠ¶**: å¯¹ç¼ºå¤±çš„æ³¨è§†åæ ‡è¿›è¡Œçº¿æ€§æ’å€¼

**ä¸ºä»€ä¹ˆé”™è¯¯**:
- çœ¨çœ¼æ—¶çœ¼çƒä½ç½®ä¸å¯é¢„æµ‹(æ–‡çŒ®æ˜ç¡®æŒ‡å‡º)
- çº¿æ€§æ’å€¼ä¼šåˆ›é€ "è™šå‡æ³¨è§†è·¯å¾„"
- ç ´ååç»­æ³¨è§†æ£€æµ‹ç®—æ³•çš„å‡†ç¡®æ€§

**å½±å“**:
```
çœŸå®æƒ…å†µ: [fix1] â†’ [çœ¨çœ¼,ä½ç½®æœªçŸ¥] â†’ [fix2åœ¨ä¸åŒä½ç½®]
é”™è¯¯æ’å€¼: [fix1] â†’ [äººå·¥è·¯å¾„] â†’ [fix2]  # åˆ›é€ äº†ä¸å­˜åœ¨çš„æ‰«è§†!
```

#### é—®é¢˜2: å¼‚å¸¸å€¼æ’å€¼ âŒ

**ç°çŠ¶**: å°†å¼‚å¸¸å€¼æ›¿æ¢ä¸ºæ’å€¼

**ä¸ºä»€ä¹ˆé”™è¯¯**:
- çœŸå®çš„å¿«é€Ÿæ‰«è§†å¯èƒ½è¢«è¯¯åˆ¤ä¸ºå¼‚å¸¸å€¼
- æ’å€¼ä¼š"å¹³æ»‘æ‰"çœŸå®çš„çœ¼åŠ¨äº‹ä»¶
- æ‰­æ›²é€Ÿåº¦æ›²çº¿,å½±å“IVTåˆ†ç±»

#### é—®é¢˜3: å¹³æ»‘æ»¤æ³¢çš„äº‰è®® âš ï¸

**ç°çŠ¶**: å¯¹x,yåæ ‡åº”ç”¨é«˜æ–¯æ»¤æ³¢(sigma=1.5, window=5)

**æ–‡çŒ®è§‚ç‚¹å¯¹æ¯”**:

âœ… **æ”¯æŒå¹³æ»‘çš„è§‚ç‚¹**:
- Tobii I-VT Filter: æä¾›å¯é€‰çš„å™ªå£°é™ä½(ç§»åŠ¨å¹³å‡/ä¸­å€¼)
- åŸå› : é™ä½é«˜é¢‘å™ªå£°(>75Hz)å¯æé«˜æ³¨è§†æ£€æµ‹å‡†ç¡®æ€§

âŒ **åå¯¹å¹³æ»‘çš„è§‚ç‚¹**:
- Filtering Eye-Tracking Data (2024): ä½é€šæ»¤æ³¢ä¼šæ˜¾è‘—æ‰­æ›²æ‰«è§†é€Ÿåº¦
- å»ºè®®: æ”¶é›†åŸå§‹æ•°æ®,å¿…è¦æ—¶ä½¿ç”¨FIRæ»¤æ³¢è€Œéé«˜æ–¯æ»¤æ³¢
- Savitzky-Golayæ¯”è¾ƒç ”ç©¶: å¤§çª—å£ä¼šæ‹‰ä¼¸ä¿¡å·,äº§ç”ŸæŒ¯é“ƒæ•ˆåº”

**å…³é”®é—®é¢˜**:
- å½“å‰é«˜æ–¯æ»¤æ³¢(sigma=1.5, window=5) **å¯èƒ½è¿‡åº¦å¹³æ»‘**
- æ²¡æœ‰è€ƒè™‘é‡‡æ ·ç‡å’Œä¿¡å·é¢‘ç‡ç‰¹æ€§
- åº”è¯¥**åœ¨IVTæ£€æµ‹å‰**è€Œéæ•°æ®æ¸…æ´—é˜¶æ®µè¿›è¡Œ(å¦‚æœéœ€è¦)

---

## 4. æ–°é¢„å¤„ç†æ–¹æ¡ˆè®¾è®¡

### 4.1 è®¾è®¡åŸåˆ™

1. **æœ€å°å¹²é¢„åŸåˆ™**: å°½é‡ä¿ç•™åŸå§‹çœ¼åŠ¨ç‰¹å¾
2. **åˆ†é˜¶æ®µå¤„ç†**: åŒºåˆ†"æ•°æ®è´¨é‡æ§åˆ¶"å’Œ"ç‰¹å¾æå–å‡†å¤‡"
3. **å¯è¿½æº¯æ€§**: è®°å½•æ‰€æœ‰å¤„ç†æ­¥éª¤,ä¿ç•™åŸå§‹æ•°æ®
4. **ç‰¹å®šåœºæ™¯ä¼˜åŒ–**: é’ˆå¯¹VRå’Œè®¤çŸ¥è¯„ä¼°ä»»åŠ¡

### 4.2 æ–°æ–¹æ¡ˆæµç¨‹å›¾

```
åŸå§‹æ•°æ®
    â†“
[é˜¶æ®µ1: æ•°æ®è´¨é‡è¯„ä¼°]
    â”œâ”€ é‡‡æ ·ç‡æ£€æŸ¥
    â”œâ”€ æœ‰æ•ˆæ•°æ®ç‡è®¡ç®—
    â””â”€ çœ¨çœ¼æ£€æµ‹ä¸æ ‡è®°
    â†“
[é˜¶æ®µ2: æ•°æ®æ¸…ç†(ä¿å®ˆ)]
    â”œâ”€ èŒƒå›´è£å‰ª(ç¡¬ä»¶é™åˆ¶)
    â”œâ”€ æ˜æ˜¾é”™è¯¯å€¼ç§»é™¤(validity=0)
    â””â”€ çœ¨çœ¼ç‰‡æ®µæ ‡è®°(ä¸æ’å€¼!)
    â†“
[é˜¶æ®µ3: å¯é€‰å™ªå£°é™ä½]
    â”œâ”€ IF: æ•°æ®å™ªå£°>é˜ˆå€¼
    â”‚   â””â”€ ä¸­å€¼æ»¤æ³¢(window=3)
    â””â”€ ELSE: è·³è¿‡
    â†“
[é˜¶æ®µ4: IVTäº‹ä»¶æ£€æµ‹]
    â”œâ”€ é€Ÿåº¦è®¡ç®—
    â”œâ”€ æ³¨è§†/æ‰«è§†åˆ†ç±»
    â””â”€ æ³¨è§†ç‚¹æå–
    â†“
å¤„ç†åçš„äº‹ä»¶æ•°æ®
```

### 4.3 è¯¦ç»†å‚æ•°é…ç½®

#### 4.3.1 é˜¶æ®µ1: è´¨é‡è¯„ä¼°

```python
quality_assessment_config = {
    # é‡‡æ ·ç‡æ£€æŸ¥
    'expected_sampling_rate': 60,  # Hz
    'sampling_rate_tolerance': 10,  # Â±10 Hz

    # æ•°æ®å®Œæ•´æ€§
    'min_valid_data_rate': 0.75,  # è‡³å°‘75%æœ‰æ•ˆæ•°æ®

    # çœ¨çœ¼æ£€æµ‹å‚æ•°
    'blink_detection': {
        'method': 'pupil_based',  # åŸºäºç³å­”é¢ç§¯å˜åŒ–
        'pupil_threshold': 0.5,   # ç³å­”é¢ç§¯å˜åŒ–é˜ˆå€¼
        'min_blink_duration': 50,  # ms
        'max_blink_duration': 500, # ms
        'pre_blink_buffer': 50,    # çœ¨çœ¼å‰ä¿ç•™ms
        'post_blink_buffer': 50    # çœ¨çœ¼åä¿ç•™ms
    }
}
```

**çœ¨çœ¼æ£€æµ‹å…¬å¼**:
```python
# ç³å­”é¢ç§¯å˜åŒ–ç‡
pupil_change_rate = |pupil[i+1] - pupil[i]| / pupil[i]

# æ£€æµ‹çœ¨çœ¼å¼€å§‹
if pupil_change_rate > threshold and pupil[i+1] < pupil[i]:
    blink_start = i

# æ£€æµ‹çœ¨çœ¼ç»“æŸ
if pupil[i] == 0 and pupil[i+1] > 0:
    blink_end = i + 1
```

#### 4.3.2 é˜¶æ®µ2: æ•°æ®æ¸…ç†

```python
cleaning_config = {
    # èŒƒå›´è£å‰ª(åŸºäºç¡¬ä»¶ç‰©ç†é™åˆ¶)
    'clip_range': True,
    'x_range': [0, 1],  # æˆ–å®é™…FOV
    'y_range': [0, 1],

    # æ˜æ˜¾é”™è¯¯å€¼å¤„ç†
    'remove_invalid_samples': True,  # validityå­—æ®µ=0çš„æ ·æœ¬

    # ç¼ºå¤±å€¼å¤„ç†: æ ‡è®°è€Œéæ’å€¼!
    'missing_value_strategy': 'mark_only',  # 'mark_only' | 'remove'

    # çœ¨çœ¼å¤„ç†: æ ‡è®°è€Œéæ’å€¼!
    'blink_strategy': 'mark_segment',  # æ ‡è®°æ•´ä¸ªçœ¨çœ¼ç‰‡æ®µ

    # æç«¯å¼‚å¸¸å€¼(éçœ¼åŠ¨äº‹ä»¶)
    'extreme_outlier_removal': {
        'enabled': True,
        'method': 'velocity_based',
        'max_velocity_threshold': 1000,  # Â°/s (ç”Ÿç†æé™~900Â°/s)
        'action': 'mark'  # æ ‡è®°è€Œéåˆ é™¤æˆ–æ’å€¼
    }
}
```

**é‡è¦**: æ‰€æœ‰"å¼‚å¸¸"æ•°æ®ä»…æ ‡è®°,ä¸ä¿®æ”¹åŸå§‹å€¼!

#### 4.3.3 é˜¶æ®µ3: å¯é€‰å™ªå£°é™ä½

```python
noise_reduction_config = {
    'enabled': False,  # é»˜è®¤å…³é—­!

    # è‡ªåŠ¨å¯ç”¨æ¡ä»¶
    'auto_enable_if': {
        'noise_level': 0.1,  # ä½ç½®å™ªå£° > 0.1Â°
        'or': {
            'sampling_jitter': 5  # é‡‡æ ·æŠ–åŠ¨ > 5ms
        }
    },

    # æ»¤æ³¢æ–¹æ³•
    'method': 'median',  # median | savgol | none

    # ä¸­å€¼æ»¤æ³¢å‚æ•°(æ¨è)
    'median_filter': {
        'window_size': 3,  # å°çª—å£ä¿ç•™ç¬æ€
        'apply_to': ['x', 'y'],  # ä¸å¤„ç†ç³å­”!
    },

    # Savgolæ»¤æ³¢å‚æ•°(å¤‡é€‰)
    'savgol_filter': {
        'window_size': 5,
        'polyorder': 2,
        'apply_to': ['x', 'y']
    },

    # ç»å¯¹ç¦æ­¢
    'gaussian_filter': {
        'enabled': False,  # âŒ ä¸ä½¿ç”¨é«˜æ–¯æ»¤æ³¢!
        'reason': 'ä¼šä¸¥é‡æ‰­æ›²æ‰«è§†é€Ÿåº¦ç‰¹å¾'
    }
}
```

**æ»¤æ³¢å…¬å¼**:

**ä¸­å€¼æ»¤æ³¢**:
```
x_filtered[i] = median(x[i-1], x[i], x[i+1])
```

**Savitzky-Golay**:
```
x_filtered[i] = Î£(c_k Ã— x[i+k])  # k from -m to m
# c_kä¸ºé¢„è®¡ç®—ç³»æ•°,å–å†³äºwindow_sizeå’Œpolyorder
```

#### 4.3.4 é˜¶æ®µ4: IVTå‚æ•°

```python
ivt_config = {
    # æ ¸å¿ƒé€Ÿåº¦é˜ˆå€¼
    'velocity_threshold': 30,  # Â°/s (Tobiiæ ‡å‡†: 30-35)

    # é€Ÿåº¦è®¡ç®—æ–¹æ³•
    'velocity_calculation': {
        'method': 'point_to_point',  # é€ç‚¹è®¡ç®—
        'use_degrees': True,         # ä½¿ç”¨è§’åº¦è€Œéåƒç´ 
        'sampling_aware': True       # è€ƒè™‘å®é™…é‡‡æ ·é—´éš”
    },

    # æ³¨è§†è¿‡æ»¤
    'fixation_filter': {
        'min_duration': 60,      # ms (Tobii: 60-100)
        'merge_distance': 0.5,   # Â° (Tobii: 0.5-1.0)
        'merge_time_window': 75  # ms (Tobii: 75)
    },

    # æ‰«è§†è¿‡æ»¤
    'saccade_filter': {
        'min_duration': 10,      # ms (Tobii: 10-20)
        'min_amplitude': 0.5     # Â° æœ€å°æ‰«è§†å¹…åº¦
    },

    # çœ¨çœ¼å¤„ç†
    'handle_blinks': {
        'action': 'create_event',  # æ ‡è®°ä¸ºå•ç‹¬äº‹ä»¶ç±»å‹
        'merge_adjacent_fixations': True  # çœ¨çœ¼å‰åçš„æ³¨è§†å¯åˆå¹¶
    }
}
```

**é€Ÿåº¦è®¡ç®—å…¬å¼(è€ƒè™‘é‡‡æ ·ç‡)**:
```python
def calculate_velocity(p1, p2, actual_dt):
    """
    p1, p2: (x, y, timestamp)
    actual_dt: å®é™…æ—¶é—´é—´éš”(s)
    """
    # è§’è·ç¦»
    dx = p2[0] - p1[0]
    dy = p2[1] - p1[1]
    angular_distance = np.sqrt(dx**2 + dy**2)  # å‡è®¾å·²æ˜¯è§’åº¦

    # é€Ÿåº¦
    velocity = angular_distance / actual_dt  # Â°/s

    return velocity
```

### 4.4 é…ç½®å¯¹æ¯”æ€»ç»“

| é¡¹ç›® | æ—§æ–¹æ¡ˆ | æ–°æ–¹æ¡ˆ | å˜æ›´ç†ç”± |
|------|--------|--------|----------|
| **ç¼ºå¤±å€¼å¤„ç†** | çº¿æ€§æ’å€¼ | ä»…æ ‡è®° | é¿å…åˆ›é€ è™šå‡æ•°æ® |
| **å¼‚å¸¸å€¼å¤„ç†** | æ’å€¼æ›¿æ¢ | æ ‡è®°ä¿ç•™ | ä¿ç•™çœŸå®æ‰«è§†äº‹ä»¶ |
| **å¹³æ»‘æ»¤æ³¢** | å¼ºåˆ¶é«˜æ–¯(Ïƒ=1.5) | æ¡ä»¶ä¸­å€¼(w=3) | å‡å°‘é€Ÿåº¦æ‰­æ›² |
| **çœ¨çœ¼å¤„ç†** | æ’å€¼ | ç‹¬ç«‹äº‹ä»¶ | ç¬¦åˆç”Ÿç†ç‰¹æ€§ |
| **æ•°æ®å®Œæ•´æ€§** | æ— æ£€æŸ¥ | è´¨é‡è¯„åˆ† | å¯è¿½æº¯æ€§ |

---

## 5. é£é™©è¯„ä¼°ä¸ç¼“è§£ç­–ç•¥

### 5.1 ä¸»è¦é£é™©

#### é£é™©1: æ•°æ®å¯ç”¨æ€§é™ä½ ğŸ”´ é«˜é£é™©

**é—®é¢˜**: ä¸æ’å€¼ç¼ºå¤±å€¼å¯èƒ½å¯¼è‡´å¯åˆ†ææ•°æ®å‡å°‘

**é‡åŒ–å½±å“**:
- å‡è®¾çœ¨çœ¼ç‡: 15æ¬¡/åˆ†é’Ÿ,æ¯æ¬¡200ms
- æµ‹è¯•æ—¶é•¿: 5åˆ†é’Ÿ
- æ•°æ®ä¸¢å¤±: 15 Ã— 5 Ã— 0.2 = 15ç§’ = 5%

**ç¼“è§£æªæ–½**:
1. **äº‹å‰**: æ”¹è¿›å®éªŒè®¾è®¡
   - ä»»åŠ¡è¯´æ˜ä¸­æé†’å‡å°‘çœ¨çœ¼
   - ä»»åŠ¡é—´éš”å…è®¸è‡ªç”±çœ¨çœ¼
   - VRåœºæ™¯ä¼˜åŒ–å‡å°‘è§†ç–²åŠ³

2. **äº‹ä¸­**: è´¨é‡ç›‘æ§
   - å®æ—¶æ˜¾ç¤ºæœ‰æ•ˆæ•°æ®ç‡
   - ä½äºé˜ˆå€¼æ—¶æç¤ºé‡æ–°æ ¡å‡†

3. **äº‹å**: æ™ºèƒ½åˆ†æ
   - åˆ†æ®µåˆ†æ(è·³è¿‡çœ¨çœ¼æ®µ)
   - ä½¿ç”¨æ³¨è§†äº‹ä»¶è€ŒéåŸå§‹æ ·æœ¬
   - ç»Ÿè®¡æ—¶æ ‡æ³¨æ•°æ®è´¨é‡

#### é£é™©2: å‚æ•°æ•æ„Ÿæ€§ ğŸŸ¡ ä¸­é£é™©

**é—®é¢˜**: IVTé€Ÿåº¦é˜ˆå€¼30Â°/så¯èƒ½ä¸é€‚åˆæ‰€æœ‰åœºæ™¯

**åœºæ™¯å·®å¼‚**:
- é˜…è¯»ä»»åŠ¡: éœ€è¦æ›´ä½é˜ˆå€¼(20-25Â°/s)
- æ¢ç´¢ä»»åŠ¡: å¯ç”¨æ›´é«˜é˜ˆå€¼(35-40Â°/s)
- è€å¹´ç¾¤ä½“: æ‰«è§†é€Ÿåº¦å˜æ…¢,å¯èƒ½éœ€è°ƒä½

**ç¼“è§£æªæ–½**:
1. **è‡ªé€‚åº”é˜ˆå€¼**:
```python
def adaptive_threshold(age, task_type):
    base_threshold = 30  # Â°/s

    # å¹´é¾„è°ƒæ•´
    if age > 65:
        base_threshold *= 0.85  # -15%

    # ä»»åŠ¡è°ƒæ•´
    if task_type == 'reading':
        base_threshold *= 0.8
    elif task_type == 'exploration':
        base_threshold *= 1.15

    return base_threshold
```

2. **å¤šé˜ˆå€¼éªŒè¯**:
   - å¹¶è¡Œè¿è¡Œå¤šä¸ªé˜ˆå€¼(25, 30, 35Â°/s)
   - å¯¹æ¯”ç»“æœä¸€è‡´æ€§
   - é€‰æ‹©æœ€ç¨³å®šå‚æ•°

#### é£é™©3: è®¡ç®—å¤æ‚åº¦å¢åŠ  ğŸŸ¢ ä½é£é™©

**é—®é¢˜**: ä¸æ’å€¼å¯¼è‡´åç»­åˆ†æéœ€å¤„ç†ä¸è§„åˆ™æ—¶é—´åºåˆ—

**å½±å“è¯„ä¼°**:
- RQAåˆ†æéœ€è¦ç­‰é—´éš”æ—¶é—´åºåˆ—
- å¯èƒ½éœ€è¦é¢å¤–çš„æ—¶é—´å¯¹é½æ­¥éª¤

**ç¼“è§£æªæ–½**:
1. **äº‹ä»¶çº§åˆ†æ**:
   - ç›´æ¥ä½¿ç”¨IVTæ£€æµ‹çš„æ³¨è§†äº‹ä»¶
   - æ³¨è§†åºåˆ—æœ¬èº«å°±æ˜¯ç¦»æ•£çš„,ä¸éœ€è¦ç­‰é—´éš”

2. **æ™ºèƒ½é‡é‡‡æ ·**:
   - ä»…åœ¨å¿…è¦æ—¶é‡é‡‡æ ·(å¦‚RQA)
   - åŸºäºæ³¨è§†äº‹ä»¶è€ŒéåŸå§‹æ ·æœ¬
   ```python
   # ä¼ªä»£ç 
   fixation_sequence = extract_fixations(raw_data, ivt_config)
   regular_series = resample_fixations(fixation_sequence, target_rate=10)  # 10 fixations/s
   ```

#### é£é™©4: å‘åå…¼å®¹æ€§ ğŸŸ¡ ä¸­é£é™©

**é—®é¢˜**: æ–°æ–¹æ¡ˆå¯èƒ½å¯¼è‡´ä¸ç°æœ‰åˆ†æç»“æœä¸ä¸€è‡´

**å½±å“**:
- å·²å‘è¡¨ç»“æœåŸºäºæ—§å¤„ç†æ–¹å¼
- æ— æ³•ç›´æ¥å¯¹æ¯”æ–°æ—§æ•°æ®

**ç¼“è§£æªæ–½**:
1. **è¿‡æ¸¡æœŸç­–ç•¥**:
   - åŒæ—¶æä¾›æ–°æ—§ä¸¤ç§å¤„ç†æ¨¡å¼
   - å¯¹æ¯”åˆ†ææŠ¥å‘Šå·®å¼‚

2. **ç‰ˆæœ¬ç®¡ç†**:
   ```python
   preprocessing_version = "v2.0"
   config['preprocessing_version'] = preprocessing_version
   # ä¿å­˜åˆ°å…ƒæ•°æ®,ç¡®ä¿å¯è¿½æº¯
   ```

3. **éªŒè¯ç ”ç©¶**:
   - é€‰å–ä»£è¡¨æ€§æ ·æœ¬
   - æ–°æ—§æ–¹æ³•å¯¹æ¯”
   - é‡åŒ–å·®å¼‚å¹¶è¯„ä¼°å½±å“

### 5.2 é£é™©ä¼˜å…ˆçº§çŸ©é˜µ

| é£é™© | å¯èƒ½æ€§ | å½±å“ | ä¼˜å…ˆçº§ | è¡ŒåŠ¨ |
|------|--------|------|--------|------|
| æ•°æ®å¯ç”¨æ€§é™ä½ | ä¸­ | é«˜ | ğŸ”´ é«˜ | ç«‹å³å®æ–½ç¼“è§£æªæ–½ |
| å‚æ•°æ•æ„Ÿæ€§ | é«˜ | ä¸­ | ğŸŸ¡ ä¸­ | å»ºç«‹è‡ªé€‚åº”æœºåˆ¶ |
| è®¡ç®—å¤æ‚åº¦ | ä½ | ä½ | ğŸŸ¢ ä½ | ç›‘æ§å³å¯ |
| å‘åå…¼å®¹æ€§ | é«˜ | ä¸­ | ğŸŸ¡ ä¸­ | å»ºç«‹è¿‡æ¸¡æ–¹æ¡ˆ |

---

## 6. å®æ–½å»ºè®®

### 6.1 åˆ†é˜¶æ®µå®æ–½è·¯çº¿å›¾

#### ç¬¬ä¸€é˜¶æ®µ: éªŒè¯ç ”ç©¶(2å‘¨)
- [ ] é€‰å–10ä¸ªä»£è¡¨æ€§æ ·æœ¬(å„ç»„å¹³è¡¡)
- [ ] å®æ–½æ–°æ—§æ–¹æ¡ˆå¯¹æ¯”
- [ ] é‡åŒ–å…³é”®æŒ‡æ ‡å·®å¼‚:
  - æ³¨è§†ç‚¹æ•°é‡
  - æ‰«è§†å¹…åº¦åˆ†å¸ƒ
  - æ•°æ®å¯ç”¨ç‡
- [ ] è¯„å®¡ä¼šè®®å†³å®šæ˜¯å¦ç»§ç»­

#### ç¬¬äºŒé˜¶æ®µ: å¹¶è¡Œè¿è¡Œ(4å‘¨)
- [ ] å®ç°é…ç½®åˆ‡æ¢åŠŸèƒ½
- [ ] æ–°æ•°æ®åŒæ—¶ç”Ÿæˆæ–°æ—§ä¸¤ç§ç»“æœ
- [ ] å»ºç«‹è´¨é‡ç›‘æ§Dashboard
- [ ] æ”¶é›†ç”¨æˆ·åé¦ˆ

#### ç¬¬ä¸‰é˜¶æ®µ: å…¨é¢åˆ‡æ¢(2å‘¨)
- [ ] æ›´æ–°é»˜è®¤é…ç½®ä¸ºæ–°æ–¹æ¡ˆ
- [ ] ä¿ç•™æ—§æ–¹æ¡ˆä½œä¸ºå¯é€‰é¡¹
- [ ] æ›´æ–°æ–‡æ¡£å’ŒåŸ¹è®­ææ–™
- [ ] å»ºç«‹é—®é¢˜åé¦ˆæœºåˆ¶

### 6.2 å…³é”®æˆåŠŸå› ç´ 

1. **æ–‡æ¡£å®Œå¤‡**:
   - æ¯ä¸ªå‚æ•°çš„å«ä¹‰å’Œå½±å“
   - å†³ç­–è¿‡ç¨‹å’Œæ–‡çŒ®ä¾æ®
   - æ•…éšœæ’æŸ¥æŒ‡å—

2. **å¯è§£é‡Šæ€§**:
   - å¯è§†åŒ–å¯¹æ¯”å·¥å…·
   - å¤„ç†æ—¥å¿—è¯¦ç»†è®°å½•
   - è´¨é‡æŠ¥å‘Šè‡ªåŠ¨ç”Ÿæˆ

3. **çµæ´»æ€§**:
   - å‚æ•°å¯è°ƒèŠ‚
   - æ–¹æ¡ˆå¯åˆ‡æ¢
   - æ‰©å±•æ€§é¢„ç•™

### 6.3 æ¨èé…ç½®æ¨¡æ¿

```python
# ä¿å®ˆæ¨¡å¼(æ¨èç”¨äºæ–°ç ”ç©¶)
CONSERVATIVE_CONFIG = {
    'quality_assessment': quality_assessment_config,
    'cleaning': {
        **cleaning_config,
        'missing_value_strategy': 'mark_only',
        'blink_strategy': 'mark_segment'
    },
    'noise_reduction': {
        'enabled': False  # é»˜è®¤å…³é—­
    },
    'ivt': ivt_config
}

# å…¼å®¹æ¨¡å¼(ç”¨äºå¯¹æ¯”ç ”ç©¶)
COMPATIBILITY_CONFIG = {
    # æ—§é…ç½®,ä¿æŒå‘åå…¼å®¹
    'cleaning': {
        'missing_method': 'interpolate',
        'outlier_method': '3sigma',
        'outlier_action': 'interpolate'
    },
    'smoothing': {
        'method': 'gaussian',
        'window_size': 5,
        'sigma': 1.5
    }
}

# é«˜è´¨é‡æ¨¡å¼(å™ªå£°æ•°æ®)
HIGH_QUALITY_CONFIG = {
    **CONSERVATIVE_CONFIG,
    'noise_reduction': {
        'enabled': True,
        'method': 'median',
        'window_size': 3
    }
}
```

---

## 7. å‚è€ƒæ–‡çŒ®

1. **Andersson, R., Larsson, L., Holmqvist, K., et al.** (2017). "One algorithm to rule them all? An evaluation and discussion of ten eye movement event-detection algorithms." *Behavior Research Methods*, 49(2), 616-637.

2. **Startsev, M., Zemblys, R.** (2023). "Filtering Eye-Tracking Data From an EyeLink 1000: Comparing Heuristic, Savitzky-Golay, IIR and FIR Digital Filters." *arXiv:2303.02134*

3. **Tobii Technology** (2012). "The Tobii I-VT Fixation Filter Algorithm Description."

4. **Hessels, R. S., Niehorster, D. C., et al.** (2024). "Uncovering and Addressing Blink-Related Challenges in Using Eye Tracking for Interactive Systems." *CHI Conference on Human Factors in Computing Systems*

5. **Krassanakis, V., Filippakopoulou, V., Nakos, B.** (2014). "EyeMMV toolbox: An eye movement post-analysis tool based on a two-step spatial dispersion threshold for fixation identification." *Journal of Eye Movement Research*, 7(1).

6. **Salvucci, D. D., & Goldberg, J. H.** (2000). "Identifying fixations and saccades in eye-tracking protocols." *Proceedings of the symposium on Eye tracking research & applications*, 71-78.

7. **Clay, V., KÃ¶nig, P., KÃ¶nig, S.** (2019). "Eye Tracking in Virtual Reality." *Journal of Eye Movement Research*, 12(1).

---

## é™„å½•A: å¿«é€Ÿå†³ç­–æ ‘

```
å¼€å§‹é¢„å¤„ç†
    â”‚
    â”œâ”€ æ•°æ®é‡‡æ ·ç‡ < 60Hz?
    â”‚   â”œâ”€ æ˜¯ â†’ âš ï¸ è­¦å‘Š: å¯èƒ½å½±å“æ³¨è§†æ£€æµ‹
    â”‚   â””â”€ å¦ â†’ ç»§ç»­
    â”‚
    â”œâ”€ æœ‰æ•ˆæ•°æ®ç‡ < 75%?
    â”‚   â”œâ”€ æ˜¯ â†’ âš ï¸ å»ºè®®é‡æ–°é‡‡é›†
    â”‚   â””â”€ å¦ â†’ ç»§ç»­
    â”‚
    â”œâ”€ æ•°æ®å™ªå£° > 0.1Â°?
    â”‚   â”œâ”€ æ˜¯ â†’ å¯ç”¨ä¸­å€¼æ»¤æ³¢(w=3)
    â”‚   â””â”€ å¦ â†’ è·³è¿‡æ»¤æ³¢
    â”‚
    â”œâ”€ ä»»åŠ¡ç±»å‹?
    â”‚   â”œâ”€ é˜…è¯» â†’ IVTé˜ˆå€¼ = 25Â°/s
    â”‚   â”œâ”€ æ¢ç´¢ â†’ IVTé˜ˆå€¼ = 35Â°/s
    â”‚   â””â”€ é»˜è®¤ â†’ IVTé˜ˆå€¼ = 30Â°/s
    â”‚
    â””â”€ æ‰§è¡ŒIVTæ£€æµ‹
```

---

## é™„å½•B: æœ¯è¯­è¡¨

| æœ¯è¯­ | è‹±æ–‡ | å®šä¹‰ |
|------|------|------|
| æ³¨è§† | Fixation | çœ¼çƒç›¸å¯¹é™æ­¢,ä¿¡æ¯æå–é˜¶æ®µ(å…¸å‹50-600ms) |
| æ‰«è§† | Saccade | å¿«é€Ÿçœ¼åŠ¨,è§†è§‰æŠ‘åˆ¶é˜¶æ®µ(å…¸å‹20-200ms,é€Ÿåº¦å¯è¾¾900Â°/s) |
| IVT | I-VT | Identification by Velocity Threshold,åŸºäºé€Ÿåº¦é˜ˆå€¼çš„äº‹ä»¶æ£€æµ‹ |
| è§†è§’ | Visual Degree | è§’åº¦å•ä½,ç”¨äºæµ‹é‡è§†ç½‘è†œä¸Šçš„è§’è·ç¦» |
| é‡‡æ ·ç‡ | Sampling Rate | æ¯ç§’é‡‡é›†æ•°æ®ç‚¹æ•°(Hz) |
| æ’å€¼ | Interpolation | æ ¹æ®å·²çŸ¥æ•°æ®ç‚¹ä¼°ç®—ä¸­é—´å€¼çš„æ–¹æ³• |
| ä½é€šæ»¤æ³¢ | Low-pass Filter | ä¿ç•™ä½é¢‘ä¿¡å·,å»é™¤é«˜é¢‘å™ªå£°çš„æ»¤æ³¢å™¨ |

---

**æ–‡æ¡£ç»“æŸ**

*å¦‚æœ‰ç–‘é—®æˆ–éœ€è¦è¿›ä¸€æ­¥è¯´æ˜,è¯·è”ç³»æŠ€æœ¯å›¢é˜Ÿ*
